var caroucssel=function(t){"use strict";const e=new WeakMap;function n(t,n,i){const s=e.get(t)||{};if(n in s)return s[n];const o=i();return s[n]=o,e.set(t,s),o}function i(t,n){const i=e.get(t);i&&(i[n]=void 0,delete i[n])}function s(t){e.delete(t)}function o(t,e){let n=null;return(...i)=>{null!==n&&clearTimeout(n),n=setTimeout((()=>t(...i)),e)}}function a(t,e){const n=document.createElement("div");n.innerHTML=t(e);const i=n.firstElementChild;return i||null}class l{constructor(){window.addEventListener("resize",(()=>{i(this,"dimensions")}))}get dimensions(){return n(this,"dimensions",(()=>{const t=document.createElement("div"),e=document.createElement("div");document.body.appendChild(e),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.appendChild(t),t.style.width="200px",t.style.height="100%",e.style.width="150px",e.style.height="200px",e.style.overflow="hidden";const n=t.offsetHeight;e.style.overflow="scroll";let i=t.offsetHeight;i=n===i?e.clientHeight:i;const s=n-i;return document.body.removeChild(e),{height:s}}))}}const r=/^caroucssel-[0-9]*$/,c="index",h="pages",d="page-index",u="scrollbar",p=.25,g=/^(link|meta|noscript|script|style|title)$/i,m="scroll",f="resize",_={className:"is-previous",label:"Previous",title:"Go to previous"},b={className:"is-next",label:"Next",title:"Go to next"},v={hasButtons:!1,buttonClassName:"button",buttonTemplate:({className:t,controls:e,label:n,title:i})=>`\n\t\t<button type="button" class="${t}" aria-label="${n}" title="${i}" aria-controls="${e}">\n\t\t\t<span>${n}</span>\n\t\t</button>\n\t`,buttonPrevious:_,buttonNext:b,hasPagination:!1,paginationClassName:"pagination",paginationLabel:({index:t})=>`${t+1}`,paginationTitle:({index:t})=>`Go to ${t+1}. page`,paginationTemplate:({className:t,controls:e,pages:n,label:i,title:s})=>`\n\t\t<ul class="${t}">\n\t\t\t${n.map(((t,o)=>{const a={index:o,page:t,pages:n},l=i(a),r=s(a);return`<li>\n\t\t\t\t\t<button type="button" aria-controls="${e}" aria-label="${r}" title="${r}">\n\t\t\t\t\t\t<span>${l}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</li>`})).join("")}\n\t\t</ul>\n\t`,hasScrollbars:!1,scrollbarsMaskClassName:"caroucssel-mask",filterItem:()=>!0,onScroll:()=>{}};let x,y=0;return t.Carousel=class{static resetInstanceCount(){}_el;_id;_conf;_mask=null;_isSmooth=!1;_previous=null;_next=null;_pagination=null;_paginationButtons=null;constructor(t,e={}){if(!(t&&t instanceof Element))throw new Error(`Carousel needs a dom element but "${typeof t}" was passed.`);this._el=t,x=x||new l,y++,t.id=t.id||`caroucssel-${y}`,this._id=t.id,this._mask=null;const n={...v,...e};switch(this._conf=n,this._addButtons(),this._addPagination(),this._updateScrollbars(),!0){case Array.isArray(e.index):this.index=e.index;break;case!isNaN(e.index):this.index=[e.index]}this._isSmooth=!0,this._onScroll=o(this._onScroll.bind(this),25),this._onResize=o(this._onResize.bind(this),25),t.addEventListener(m,this._onScroll),window.addEventListener(f,this._onResize)}get el(){return this._el}get id(){return this._id}get index(){return n(this,c,(()=>{const{el:t,items:e}=this,{length:n}=e,{clientWidth:i}=t,s=t.getBoundingClientRect().left,o=[];let a=0;for(;a<n;a++){const t=e[a].getBoundingClientRect(),{width:n}=t;let{left:l}=t;l-=s,l+n*p>=0&&l+.75*n<=i&&o.push(a)}return 0===o.length?[0]:o}))}set index(t){const{el:e,items:n}=this,{length:s}=n;if(!Array.isArray(t)||!t.length)return;if(0===s)return;let o=t[0]||0;o=Math.max(Math.min(o,s-1),0);const{scrollLeft:a}=e,l=a,r={left:n[o].offsetLeft};if(o===this.pages[0][0]&&(r.left=0),l===r.left)return;i(this,c);const h=this._isSmooth?"smooth":"auto";e.scrollTo({...r,behavior:h})}get items(){return n(this,"items",(()=>{const{el:t,_conf:{filterItem:e}}=this;return Array.from(t.children).filter((t=>!g.test(t.tagName)&&!t.hidden)).filter(e)}))}get pages(){return n(this,h,(()=>{const{el:t,items:e}=this,{clientWidth:n}=t;if(0===n)return e.map(((t,e)=>[e]));let i=[[]];return e.map(((t,e)=>{const{offsetLeft:n,clientWidth:i}=t;return{left:n,width:i,item:t,index:e}})).sort(((t,e)=>t.left-e.left)).forEach((t=>{const{left:e,width:s}=t,o=i[i.length-1];let a=o[0]?.left||0;o===i[0]&&(a=0);let l=Math.floor((e-a+.75*s)/n);for(;l>0;)i.push([]),l--;i[i.length-1].push(t)})),i=i.filter((t=>0!==t.length)),i.map((t=>t.map((({index:t})=>t))))}))}get pageIndex(){return n(this,d,(()=>{const{el:t,items:e,index:n,pages:i}=this,s=t.getBoundingClientRect().left,{clientWidth:o}=t;let a=n.reduce(((t,n)=>{if(!e[n])return t;let{left:i,right:a}=e[n].getBoundingClientRect();return i=Math.round(i-s),a=Math.round(a-s),i<0||o<a?t:t.concat([n])}),[]);0===a.length&&(a=[n[0]]);const l=a.sort(((t,n)=>{const i=e[t].getBoundingClientRect().right;return e[n].getBoundingClientRect().right-i}))[0];return i.findIndex((t=>t.includes(l)))}))}destroy(){const{el:t}=this;r.test(t.id)&&t.removeAttribute("id"),this._removeButtons(),this._removePagination(),this._removeScrollbars(),t.removeEventListener(m,this._onScroll),window.removeEventListener(f,this._onResize),s(this)}update(){s(this),this._updateButtons(),this._updatePagination(),this._updateScrollbars()}_updateScrollbars(){const{el:t,_conf:i}=this,{hasScrollbars:s,scrollbarsMaskClassName:o}=i;if(s)return;let{height:a}=x.dimensions;t.scrollWidth<=t.clientWidth&&(a=0),this._mask=this._mask||(()=>{const e=document.createElement("div");return e.className=o,e.style.overflow="hidden",e.style.height="100%",t.parentNode?.insertBefore(e,this.el),e.appendChild(t),e})();if(a===n(this,u,(()=>{})))return;!function(t,n,i){const s=e.get(t)||{};s[n]=i,e.set(t,s)}(this,u,a);const l=t;l.style.height=`calc(100% + ${a}px)`,l.style.marginBottom=-1*a+"px"}_removeScrollbars(){const{_mask:t,el:e}=this;t&&(t.parentNode?.insertBefore(e,t),t.parentNode?.removeChild(t),e.removeAttribute("style"),this._mask=null)}_addButtons(){const{el:t,id:e,_conf:n}=this;if(!n.hasButtons)return;const{buttonTemplate:i,buttonClassName:s,buttonPrevious:o,buttonNext:l}=n,r=e,[c,h]=[{..._,...o,controls:r,className:[s,o.className].join(" ")},{...b,...l,controls:r,className:[s,l.className].join(" ")}].map((t=>a(i,t)));if(c){const e=()=>{const{pages:t,pageIndex:e}=this,n=t[e-1]||t[0];this.index=n};c.onclick=e,t.parentNode?.appendChild(c)}if(this._previous=c,h){const e=()=>{const{pages:t,pageIndex:e}=this,n=t[e+1]||t[t.length-1];this.index=n};h.onclick=e,t.parentNode?.appendChild(h)}this._next=h,this._updateButtons()}_updateButtons(){const{_conf:t}=this;if(!t.hasButtons)return;const{pages:e,pageIndex:n,_previous:i,_next:s}=this;if(i){const t=void 0===e[n-1];i.disabled=t}if(s){const t=void 0===e[n+1];s.disabled=t}}_removeButtons(){const{_previous:t,_next:e}=this;[t,e].forEach((t=>{t&&(t.onclick=null,t.parentNode?.removeChild(t))}))}_addPagination(){const{_conf:t}=this;if(!t.hasPagination)return;const{_mask:e,el:n,id:i,pages:s}=this;if(s.length<2)return;const{paginationTemplate:o,paginationClassName:l,paginationLabel:r,paginationTitle:c}=t,h=a(o,{pages:s,controls:i,className:l,label:r,title:c});if(!h)return;const d=Array.from(h.querySelectorAll("button")).map(((t,e)=>(t.onclick=()=>this.index=s[e],t)));(e||n).parentNode?.appendChild(h),this._pagination=h,this._paginationButtons=d,this._updatePagination()}_updatePagination(){const{_conf:t}=this;if(!t.hasPagination)return;const{pageIndex:e,_paginationButtons:n}=this;n&&n.forEach(((t,n)=>t.disabled=n===e))}_removePagination(){const{_pagination:t,_paginationButtons:e}=this;(e||[]).forEach((t=>{t.onclick=null,t.parentNode?.removeChild(t)})),this._paginationButtons=null,t&&t.parentNode?.removeChild(t),this._pagination=null}_onScroll(t){i(this,c),i(this,d),this._updateButtons(),this._updatePagination();const{index:e,_conf:{onScroll:n}}=this;n&&n({index:e,type:m,target:this,originalEvent:t})}_onResize(){i(this,h),i(this,c),i(this,d),this._updateButtons(),this._removePagination(),this._addPagination(),this._updateScrollbars()}},Object.defineProperty(t,"__esModule",{value:!0}),t}({});

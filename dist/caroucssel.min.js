!function(t,e){if("function"==typeof define&&define.amd)define("caroucssel",["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var n={exports:{}};e(n.exports),t.caroucssel=n.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(t){function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}Object.defineProperty(t,"__esModule",{value:!0}),t.Carousel=void 0;var c=new WeakMap;function h(t,e,n){var i=c.get(t)||{};if(e in i)return i[e];var o=n();return i[e]=o,c.set(t,i),o}function f(t,e){var n=c.get(t);n&&(n[e]=void 0,delete n[e])}function d(t){c.delete(t)}function p(t,e){var n=null;return function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];null!==n&&clearTimeout(n),n=setTimeout((function(){return t.apply(void 0,o)}),e)}}function v(t,e){var n=document.createElement("div");n.innerHTML=t(e);var i=n.firstElementChild;return i||null}var g,m=function(){function t(){var e=this;s(this,t),window.addEventListener("resize",(function(){f(e,"dimensions")}))}return u(t,[{key:"dimensions",get:function(){return h(this,"dimensions",(function(){var t=document.createElement("div"),e=document.createElement("div");document.body.appendChild(e),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.appendChild(t),t.style.width="200px",t.style.height="100%",e.style.width="150px",e.style.height="200px",e.style.overflow="hidden";var n=t.offsetHeight;e.style.overflow="scroll";var i=t.offsetHeight,o=n-(i=n===i?e.clientHeight:i);return document.body.removeChild(e),{height:o}}))}}]),t}(),y=function(t){return"caroucssel-".concat(t)},b=/^caroucssel-[0-9]*$/,_="index",x="pages",k="page-index",w="scrollbar",N=.25,S=/^(link|meta|noscript|script|style|title)$/i,C="scroll",P="resize",B={className:"is-previous",label:"Previous",title:"Go to previous"},O={className:"is-next",label:"Next",title:"Go to next"},E={hasButtons:!1,buttonClassName:"button",buttonTemplate:function(t){var e=t.className,n=t.controls,i=t.label,o=t.title;return'\n\t\t<button type="button" class="'.concat(e,'" aria-label="').concat(i,'" title="').concat(o,'" aria-controls="').concat(n,'">\n\t\t\t<span>').concat(i,"</span>\n\t\t</button>\n\t")},buttonPrevious:B,buttonNext:O,hasPagination:!1,paginationClassName:"pagination",paginationLabel:function(t){var e=t.index;return"".concat(e+1)},paginationTitle:function(t){var e=t.index;return"Go to ".concat(e+1,". page")},paginationTemplate:function(t){var e=t.className,n=t.controls,i=t.pages,o=t.label,r=t.title;return'\n\t\t<ul class="'.concat(e,'">\n\t\t\t').concat(i.map((function(t,e){var a={index:e,page:t,pages:i},s=o(a),l=r(a);return'<li>\n\t\t\t\t\t<button type="button" aria-controls="'.concat(n,'" aria-label="').concat(l,'" title="').concat(l,'">\n\t\t\t\t\t\t<span>').concat(s,"</span>\n\t\t\t\t\t</button>\n\t\t\t\t</li>")})).join(""),"\n\t\t</ul>\n\t")},hasScrollbars:!1,scrollbarsMaskClassName:"caroucssel-mask",filterItem:function(){return!0},onScroll:function(){}},j=0,A=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s(this,t),a(this,"_el",void 0),a(this,"_id",void 0),a(this,"_conf",void 0),a(this,"_mask",null),a(this,"_isSmooth",!1),a(this,"_previous",null),a(this,"_next",null),a(this,"_pagination",null),a(this,"_paginationButtons",null),!(e&&e instanceof Element))throw new Error('Carousel needs a dom element but "'.concat(r(e),'" was passed.'));this._el=e,g=g||new m,j++,e.id=e.id||y(j),this._id=e.id,this._mask=null;var i=o(o({},E),n);switch(this._conf=i,this._addButtons(),this._addPagination(),this._updateScrollbars(),!0){case Array.isArray(n.index):this.index=n.index;break;case!isNaN(n.index):this.index=[n.index]}this._isSmooth=!0,this._onScroll=p(this._onScroll.bind(this),25),this._onResize=p(this._onResize.bind(this),25),e.addEventListener(C,this._onScroll),window.addEventListener(P,this._onResize)}return u(t,[{key:"el",get:function(){return this._el}},{key:"id",get:function(){return this._id}},{key:"index",get:function(){var t=this;return h(this,_,(function(){for(var e=t.el,n=t.items,i=n.length,o=e.clientWidth,r=e.getBoundingClientRect().left,a=[],s=0;s<i;s++){var l=n[s].getBoundingClientRect(),u=l.width,c=l.left;(c-=r)+u*N>=0&&c+.75*u<=o&&a.push(s)}return 0===a.length?[0]:a}))},set:function(t){var e=this.el,n=this.items,i=n.length;if(Array.isArray(t)&&t.length&&0!==i){var r=t[0]||0;r=Math.max(Math.min(r,i-1),0);var a=e.scrollLeft,s={left:n[r].offsetLeft};if(r===this.pages[0][0]&&(s.left=0),a!==s.left){f(this,_);var l=this._isSmooth?"smooth":"auto";e.scrollTo(o(o({},s),{},{behavior:l}))}}}},{key:"items",get:function(){var t=this;return h(this,"items",(function(){var e=t.el,n=t._conf.filterItem;return Array.from(e.children).filter((function(t){return!S.test(t.tagName)&&!t.hidden})).filter(n)}))}},{key:"pages",get:function(){var t=this;return h(this,x,(function(){var e=t.el,n=t.items,i=e.clientWidth;if(0===i)return n.map((function(t,e){return[e]}));var o=[[]];return n.map((function(t,e){return{left:t.offsetLeft,width:t.clientWidth,item:t,index:e}})).sort((function(t,e){return t.left-e.left})).forEach((function(t){var e=t.left,n=t.width,r=o[o.length-1],a=r[0],s=(null==a?void 0:a.left)||0;r===o[0]&&(s=0);for(var l=Math.floor((e-s+.75*n)/i);l>0;)o.push([]),l--;o[o.length-1].push(t)})),(o=o.filter((function(t){return 0!==t.length}))).map((function(t){return t.map((function(t){return t.index}))}))}))}},{key:"pageIndex",get:function(){var t=this;return h(this,k,(function(){var e=t.el,n=t.items,i=t.index,o=t.pages,r=e.getBoundingClientRect().left,a=e.clientWidth,s=i.reduce((function(t,e){if(!n[e])return t;var i=n[e].getBoundingClientRect(),o=i.left,s=i.right;return o=Math.round(o-r),s=Math.round(s-r),o<0||a<s?t:t.concat([e])}),[]);0===s.length&&(s=[i[0]]);var l=s.sort((function(t,e){var i=n[t].getBoundingClientRect().right;return n[e].getBoundingClientRect().right-i}))[0];return o.findIndex((function(t){return t.includes(l)}))}))}},{key:"destroy",value:function(){var t=this.el;b.test(t.id)&&t.removeAttribute("id"),this._removeButtons(),this._removePagination(),this._removeScrollbars(),t.removeEventListener(C,this._onScroll),window.removeEventListener(P,this._onResize),d(this)}},{key:"update",value:function(){d(this),this._updateButtons(),this._updatePagination(),this._updateScrollbars()}},{key:"_updateScrollbars",value:function(){var t=this,e=this.el,n=this._conf,i=n.hasScrollbars,o=n.scrollbarsMaskClassName;if(!i){var r,a,s=g.dimensions.height;if(e.scrollWidth<=e.clientWidth&&(s=0),this._mask=this._mask||((a=document.createElement("div")).className=o,a.style.overflow="hidden",a.style.height="100%",null===(r=e.parentNode)||void 0===r||r.insertBefore(a,t.el),a.appendChild(e),a),s!==h(this,w,(function(){}))){var l,u,f,d;l=this,u=w,f=s,(d=c.get(l)||{})[u]=f,c.set(l,d);var p=e;p.style.height="calc(100% + ".concat(s,"px)"),p.style.marginBottom="".concat(-1*s,"px")}}}},{key:"_removeScrollbars",value:function(){var t,e,n=this._mask,i=this.el;n&&(null===(t=n.parentNode)||void 0===t||t.insertBefore(i,n),null===(e=n.parentNode)||void 0===e||e.removeChild(n),i.removeAttribute("style"),this._mask=null)}},{key:"_addButtons",value:function(){var t=this,n=this.el,i=this.id,r=this._conf;if(r.hasButtons){var a=r.buttonTemplate,s=r.buttonClassName,l=r.buttonPrevious,u=r.buttonNext,c=i,h=e([o(o(o({},B),l),{},{controls:c,className:[s,l.className].join(" ")}),o(o(o({},O),u),{},{controls:c,className:[s,u.className].join(" ")})].map((function(t){return v(a,t)})),2),f=h[0],d=h[1];if(f){var p;f.onclick=function(){var e=t.pages,n=e[t.pageIndex-1]||e[0];t.index=n},null===(p=n.parentNode)||void 0===p||p.appendChild(f)}if(this._previous=f,d){var g;d.onclick=function(){var e=t.pages,n=e[t.pageIndex+1]||e[e.length-1];t.index=n},null===(g=n.parentNode)||void 0===g||g.appendChild(d)}this._next=d,this._updateButtons()}}},{key:"_updateButtons",value:function(){if(this._conf.hasButtons){var t=this.pages,e=this.pageIndex,n=this._previous,i=this._next;if(n){var o=void 0===t[e-1];n.disabled=o}if(i){var r=void 0===t[e+1];i.disabled=r}}}},{key:"_removeButtons",value:function(){[this._previous,this._next].forEach((function(t){var e;t&&(t.onclick=null,null===(e=t.parentNode)||void 0===e||e.removeChild(t))}))}},{key:"_addPagination",value:function(){var t=this,e=this._conf;if(e.hasPagination){var n=this._mask,i=this.el,o=this.id,r=this.pages;if(!(r.length<2)){var a=e.paginationTemplate,s=e.paginationClassName,l=e.paginationLabel,u=e.paginationTitle,c=v(a,{pages:r,controls:o,className:s,label:l,title:u});if(c){var h=Array.from(c.querySelectorAll("button")).map((function(e,n){return e.onclick=function(){return t.index=r[n]},e})),f=(n||i).parentNode;null==f||f.appendChild(c),this._pagination=c,this._paginationButtons=h,this._updatePagination()}}}}},{key:"_updatePagination",value:function(){if(this._conf.hasPagination){var t=this.pageIndex,e=this._paginationButtons;e&&e.forEach((function(e,n){return e.disabled=n===t}))}}},{key:"_removePagination",value:function(){var t,e=this._pagination;(this._paginationButtons||[]).forEach((function(t){var e;t.onclick=null,null===(e=t.parentNode)||void 0===e||e.removeChild(t)})),this._paginationButtons=null,e&&(null===(t=e.parentNode)||void 0===t||t.removeChild(e)),this._pagination=null}},{key:"_onScroll",value:function(t){f(this,_),f(this,k),this._updateButtons(),this._updatePagination();var e=this.index,n=this._conf.onScroll;n&&n({index:e,type:C,target:this,originalEvent:t})}},{key:"_onResize",value:function(){f(this,x),f(this,_),f(this,k),this._updateButtons(),this._removePagination(),this._addPagination(),this._updateScrollbars()}}],[{key:"resetInstanceCount",value:function(){}}]),t}();t.Carousel=A}));

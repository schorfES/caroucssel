var caroucssel=function(t){"use strict";const e=new WeakMap;function i(t,i,n){const s=e.get(t)||{};if(i in s)return s[i];if(!n)return;const o=n();return s[i]=o,e.set(t,s),o}function n(t,i,n){const s=e.get(t)||{};s[i]=n,e.set(t,s)}function s(t,i){const n=e.get(t);n&&(n[i]=void 0,delete n[i])}function o(t){e.delete(t)}function r(t,e){const i=document.createElement("div");i.innerHTML=t(e);const n=i.firstElementChild;return n||null}const l="prxy",a="conf",h="btns",d="click",c={template:({className:t,controls:e,label:i,title:n})=>`\n\t\t<button type="button" class="${t}" aria-label="${i}" title="${n}" aria-controls="${e}">\n\t\t\t<span>${i}</span>\n\t\t</button>\n\t`,className:"button",nextClassName:"is-next",nextLabel:"Next",nextTitle:"Go to next",previousClassName:"is-previous",previousLabel:"Previous",previousTitle:"Go to previous"};const u="prxy",p="conf",g="pgidx",v="posx",m="scrl",f="time",b="grab",y="mousemove",x="mouseup";function _(t){return t instanceof MouseEvent?t.clientX:0}const E={indicator:!1};var w,N;t.UpdateType=void 0,(w=t.UpdateType||(t.UpdateType={})).SCROLL="scroll",w.RESIZE="resize",w.FORCED="forced",w.FEATURE="feature",t.ScrollBehavior=void 0,(N=t.ScrollBehavior||(t.ScrollBehavior={})).AUTO="auto",N.SMOOTH="smooth";const O="prxy",C="conf",L="pags",S="btns",T={template:({className:t,controls:e,pages:i,label:n,title:s})=>`\n\t\t<ul class="${t}">\n\t\t\t${i.map(((t,o)=>{const r={index:o,page:t,pages:i},l=n(r),a=s(r);return`<li>\n\t\t\t\t\t<button type="button" aria-controls="${e}" aria-label="${a}" title="${a}">\n\t\t\t\t\t\t<span>${l}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</li>`})).join("")}\n\t\t</ul>\n\t`,className:"pagination",label:({index:t})=>`${t+1}`,title:({index:t})=>`Go to ${t+1}. page`};const k="dims";class R{constructor(){window.addEventListener("resize",(()=>{s(this,k)}))}get dimensions(){return i(this,k,(()=>{const t=document.createElement("div"),e=document.createElement("div");document.body.appendChild(e),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.appendChild(t),t.style.width="200px",t.style.height="100%",e.style.width="150px",e.style.height="200px",e.style.overflow="hidden";const i=t.offsetHeight;e.style.overflow="scroll";let n=t.offsetHeight;n=i===n?e.clientHeight:n;const s=i-n;return document.body.removeChild(e),{height:s}}))}}const j="prxy",I="conf",$="mask",B="hght";let M;const A={enabled:!0,className:"caroucssel-mask",tagName:"div"};class P{constructor(t={}){n(this,I,Object.assign(Object.assign({},A),t))}get name(){return"buildin:mask"}get el(){var t;return null!==(t=i(this,$))&&void 0!==t?t:null}init(t){n(this,j,t),M=null!=M?M:new R,this._render()}destroy(){this._remove(),o(this)}update(e){switch(e.type){case t.UpdateType.RESIZE:case t.UpdateType.FORCED:s(this,B),this._render();break;default:this._render()}}_render(){const{enabled:t,className:e,tagName:s}=i(this,I);if(!t)return;const o=i(this,j).el;let{height:r}=M.dimensions;o.scrollWidth<=o.clientWidth&&(r=0),i(this,$,(()=>{var t;const i=document.createElement(s);return i.className=e,i.style.overflow="hidden",i.style.height="100%",null===(t=o.parentNode)||void 0===t||t.insertBefore(i,o),i.appendChild(o),i}));r!==i(this,B)&&(n(this,B,r),o.style.height=`calc(100% + ${r}px)`,o.style.marginBottom=-1*r+"px")}_remove(){var t,e;const{el:n}=i(this,j),s=i(this,$);null===(t=null==s?void 0:s.parentNode)||void 0===t||t.insertBefore(n,s),null===(e=null==s?void 0:s.parentNode)||void 0===e||e.removeChild(s),n.removeAttribute("style")}}const U="inst",D="feat";function z(t){return i(t,U)}class W{constructor(t,e){n(this,U,t),n(this,D,e)}get id(){return z(this).id}get el(){return z(this).el}get mask(){return z(this).mask}get index(){return z(this).index}set index(t){z(this).index=t}get items(){return z(this).items}get pages(){return z(this).pages}get pageIndex(){return z(this).pageIndex}update(e){var n;z(this).update(),(n=this,i(n,D)).forEach((i=>{i!==e&&i.update({type:t.UpdateType.FEATURE})}))}}function F(t,e){let i=null;return(...n)=>{null!==i&&clearTimeout(i),i=setTimeout((()=>t(...n)),e)}}const H=/^caroucssel-[0-9]*$/,G="scroll",Z="resize",q="element",V="config",X="index",J="items",K="pages",Q="page-index",Y="mask",tt="feautres",et=.25,it=/^(link|meta|noscript|script|style|title)$/i;let nt=0;const st={features:[],filterItem:()=>!0,onScroll:()=>{}};return t.Buttons=class{constructor(t={}){n(this,a,Object.assign(Object.assign({},c),t)),this._onPrev=this._onPrev.bind(this),this._onNext=this._onNext.bind(this)}get name(){return"buildin:buttons"}init(t){n(this,l,t),this._render()}destroy(){this._remove(),o(this)}update(){this._render()}_render(){const t=i(this,l),e=i(this,a),{el:n,mask:s,pages:o,pageIndex:c}=t,[u,p]=i(this,h,(()=>{const t=null!=s?s:n,{template:i,className:o,previousClassName:l,previousLabel:a,previousTitle:h,nextClassName:c,nextLabel:u,nextTitle:p}=e;return[{controls:n.id,label:u,title:p,className:[o,c].join(" "),handler:this._onNext},{controls:n.id,label:a,title:h,className:[o,l].join(" "),handler:this._onPrev}].map((e=>{var n,{handler:s}=e,o=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]])}return i}(e,["handler"]);const l=r(i,o);return l?(l.addEventListener(d,s),null===(n=t.parentNode)||void 0===n||n.insertBefore(l,t.nextSibling),l):null}))}));if(u){const t=void 0===o[c+1];u.disabled=t}if(p){const t=void 0===o[c-1];p.disabled=t}}_remove(){i(this,h).forEach((t=>{var e;null==t||t.removeEventListener(d,this._onPrev),null==t||t.removeEventListener(d,this._onNext),null===(e=null==t?void 0:t.parentNode)||void 0===e||e.removeChild(t)}))}_onPrev(){const t=i(this,l),{pages:e,pageIndex:n}=t,s=e[n-1]||e[0];t.index=s}_onNext(){const t=i(this,l),{pages:e,pageIndex:n}=t,s=e[n+1]||e[e.length-1];t.index=s}},t.Carousel=class{constructor(e,i={}){if(this.behavior=t.ScrollBehavior.AUTO,!(e&&e instanceof Element))throw new Error(`Carousel needs a dom element but "${typeof e}" was passed.`);n(this,q,e),nt++,e.id=e.id||`caroucssel-${nt}`,n(this,"id",e.id);const s=Object.assign(Object.assign({},st),i);n(this,V,s);let o=null,r=[...s.features];const l=s.features.findIndex((t=>t instanceof P));l>-1&&([o]=r.splice(l,1)),null!=o||(o=new P),r=r.filter((t=>!(t instanceof P))),r=[o,...r],n(this,Y,o);const a=new W(this,r);switch(n(this,"proxy",a),n(this,tt,r),r.forEach((t=>t.init(a))),!0){case Array.isArray(i.index):this.index=i.index;break;case!isNaN(i.index):this.index=[i.index]}this.behavior=t.ScrollBehavior.SMOOTH,this._onScroll=F(this._onScroll.bind(this),25),this._onResize=F(this._onResize.bind(this),25),e.addEventListener(G,this._onScroll),window.addEventListener(Z,this._onResize)}static resetInstanceCount(){}get el(){return i(this,q)}get mask(){var t;return null!==(t=i(this,Y).el)&&void 0!==t?t:null}get id(){return i(this,"id")}get index(){return i(this,X,(()=>{const{el:t,items:e}=this,{length:i}=e,{clientWidth:n}=t,s=t.getBoundingClientRect().left,o=[];let r=0;for(;r<i;r++){const t=e[r].getBoundingClientRect(),{width:i}=t;let{left:l}=t;l-=s,l+i*et>=0&&l+.75*i<=n&&o.push(r)}return 0===o.length?[0]:o}))}set index(t){const{behavior:e,el:i,items:n}=this,{length:o}=n;if(!Array.isArray(t)||!t.length)return;let r=t[0]||0;r=Math.max(Math.min(r,o-1),0);const{scrollLeft:l}=i,a=l,h={left:n[r].offsetLeft};r===this.pages[0][0]&&(h.left=0),a!==h.left&&(s(this,X),i.scrollTo(Object.assign(Object.assign({},h),{behavior:e})))}get items(){return i(this,J,(()=>{const{filterItem:t}=i(this,V),{el:e}=this;return Array.from(e.children).filter((t=>!it.test(t.tagName)&&!t.hidden)).filter(t)}))}get pages(){return i(this,K,(()=>{const{el:t,items:e}=this,{clientWidth:i}=t;if(0===i)return e.map(((t,e)=>[e]));let n=[[]];return e.map(((t,e)=>{const{offsetLeft:i,clientWidth:n}=t;return{left:i,width:n,item:t,index:e}})).sort(((t,e)=>t.left-e.left)).forEach((t=>{const{left:e,width:s}=t,o=n[n.length-1],r=o[0];let l=(null==r?void 0:r.left)||0;o===n[0]&&(l=0);let a=Math.floor((e-l+.75*s)/i);for(;a>0;)n.push([]),a--;n[n.length-1].push(t)})),n=n.filter((t=>0!==t.length)),n.map((t=>t.map((({index:t})=>t))))}))}get pageIndex(){return i(this,Q,(()=>{const{el:t,items:e,index:i,pages:n}=this,s=t.getBoundingClientRect().left,{clientWidth:o}=t;let r=i.reduce(((t,i)=>{if(!e[i])return t;let{left:n,right:r}=e[i].getBoundingClientRect();return n=Math.round(n-s),r=Math.round(r-s),n<0||o<r?t:t.concat([i])}),[]);0===r.length&&(r=[i[0]]);const l=r.sort(((t,i)=>{const n=e[t].getBoundingClientRect().right;return e[i].getBoundingClientRect().right-n}))[0];return n.findIndex((t=>t.includes(l)))}))}destroy(){const{el:t}=this;H.test(t.id)&&t.removeAttribute("id");i(this,tt).forEach((t=>t.destroy())),t.removeEventListener(G,this._onScroll),window.removeEventListener(Z,this._onResize),o(this)}update(){s(this,X),s(this,J),s(this,K),s(this,Q);i(this,tt).forEach((e=>e.update({type:t.UpdateType.FORCED})))}_onScroll(e){s(this,X),s(this,Q);i(this,tt).forEach((e=>e.update({type:t.UpdateType.SCROLL})));const{index:n}=this;i(this,V).onScroll({index:n,type:G,target:this,originalEvent:e})}_onResize(){s(this,K),s(this,X),s(this,Q);i(this,tt).forEach((e=>e.update({type:t.UpdateType.RESIZE})))}},t.Mask=P,t.Mouse=class{constructor(t={}){n(this,p,Object.assign(Object.assign({},E),t)),this._onStart=this._onStart.bind(this),this._onDrag=this._onDrag.bind(this),this._onEnd=this._onEnd.bind(this)}get name(){return"buildin:mouse"}init(t){n(this,u,t);const e=i(this,p),{el:s}=t;s.style.cursor=e.indicator?b:"",s.addEventListener("mousedown",this._onStart,{passive:!0})}destroy(){o(this)}update(){}_onStart(t){var e;const n=i(this,f);clearTimeout(n);const s=i(this,p),o=i(this,u),r=o.el;i(this,m,(()=>r.scrollLeft)),i(this,v,(()=>_(t))),i(this,g,(()=>o.pageIndex)),r.style.userSelect="none",r.style.scrollBehavior="auto",r.style.scrollSnapType="none",r.style.cursor=s.indicator?"grabbing":"",window.addEventListener(y,this._onDrag,{passive:!0}),window.addEventListener(x,this._onEnd,{passive:!0}),null===(e=s.onStart)||void 0===e||e.call(s,{originalEvent:t})}_onDrag(t){var e;const n=i(this,p),{el:s}=i(this,u),o=i(this,m),r=i(this,v)-_(t);s.scrollLeft=o+r,null===(e=n.onDrag)||void 0===e||e.call(n,{originalEvent:t})}_onEnd(t){var e,o;const r=i(this,u),l=i(this,p),a=i(this,m),h=i(this,g);s(this,m),s(this,v),s(this,g);const d=r.el,c=Math.min(Math.max(100,.25*d.clientWidth),250),_=d.scrollLeft-a,E=Math.abs(_);d.style.removeProperty("user-select"),d.style.removeProperty("scroll-behavior"),d.style.cursor=l.indicator?b:"";let w=r.index;if(E>c){const t=_/E,i=Math.max(h+t,0);w=null!==(e=r.pages[i])&&void 0!==e?e:w}window.requestAnimationFrame((()=>{r.index=w}));const N=window.setTimeout((()=>{d.style.removeProperty("scroll-snap-type")}),1e3);n(this,f,N),window.removeEventListener(y,this._onDrag),window.removeEventListener(x,this._onEnd),null===(o=l.onEnd)||void 0===o||o.call(l,{originalEvent:t})}},t.Pagination=class{constructor(t={}){n(this,C,Object.assign(Object.assign({},T),t)),this._onClick=this._onClick.bind(this)}get name(){return"buildin:pagination"}init(t){n(this,O,t),this._add()}destroy(){this._remove(),o(this)}update(e){switch(e.type){case t.UpdateType.SCROLL:this._update();break;default:this._remove(),this._add()}}_add(){var t;const e=i(this,O),s=i(this,C),{el:o,mask:l,pages:a}=e,h=null!=l?l:o;if(a.length<2)return;const{template:d,className:c,label:u,title:p}=s,g=r(d,{label:u,title:p,pages:a,className:c,controls:o.id});if(!g)return;const v=Array.from(g.querySelectorAll("button")).map((t=>(t.addEventListener("click",this._onClick,!0),t)));null===(t=h.parentNode)||void 0===t||t.appendChild(g),n(this,L,g),n(this,S,v),this._update()}_update(){const t=i(this,O),e=i(this,S),{pageIndex:n}=t;e.forEach(((t,e)=>t.disabled=e===n))}_remove(){var t;const e=i(this,L),n=i(this,S);null==n||n.forEach((t=>{var e;t.removeEventListener("click",this._onClick),null===(e=t.parentNode)||void 0===e||e.removeChild(t)})),null===(t=null==e?void 0:e.parentNode)||void 0===t||t.removeChild(e),s(this,S),s(this,L)}_onClick(t){const e=i(this,O),n=i(this,S),s=t.currentTarget,o=n.indexOf(s);e.index=e.pages[o]}},t.version="1.0.0",Object.defineProperty(t,"__esModule",{value:!0}),t}({});

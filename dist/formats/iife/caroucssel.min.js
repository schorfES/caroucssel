var caroucssel=function(t){"use strict";const e=new WeakMap;function n(t,n,i){const s=e.get(t)||{};if(n in s)return s[n];if(!i)return;const r=i();return s[n]=r,e.set(t,s),r}function i(t,n,i){const s=e.get(t)||{};s[n]=i,e.set(t,s)}function s(t,n){const i=e.get(t);i&&(i[n]=void 0,delete i[n])}function r(t){e.delete(t)}function l(t,e){const n=document.createElement("div");n.innerHTML=t(e);const i=n.firstElementChild;return i||null}const o="prxy",a="conf",h="btns",c="click",d={template:({className:t,controls:e,label:n,title:i})=>`\n\t\t<button type="button" class="${t}" aria-label="${n}" title="${i}" aria-controls="${e}">\n\t\t\t<span>${n}</span>\n\t\t</button>\n\t`,className:"button",nextClassName:"is-next",nextLabel:"Next",nextTitle:"Go to next",previousClassName:"is-previous",previousLabel:"Previous",previousTitle:"Go to previous"};var u,p;!function(t){t.SCROLL="scroll",t.RESIZE="resize",t.FORCED="forced",t.FEATURE="feature"}(u||(u={})),function(t){t.AUTO="auto",t.SMOOTH="smooth"}(p||(p={}));const g="prxy",m="conf",f="pags",v="btns",b={template:({className:t,controls:e,pages:n,label:i,title:s})=>`\n\t\t<ul class="${t}">\n\t\t\t${n.map(((t,r)=>{const l={index:r,page:t,pages:n},o=i(l),a=s(l);return`<li>\n\t\t\t\t\t<button type="button" aria-controls="${e}" aria-label="${a}" title="${a}">\n\t\t\t\t\t\t<span>${o}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</li>`})).join("")}\n\t\t</ul>\n\t`,className:"pagination",label:({index:t})=>`${t+1}`,title:({index:t})=>`Go to ${t+1}. page`};const x="dims";class y{constructor(){window.addEventListener("resize",(()=>{s(this,x)}))}get dimensions(){return n(this,x,(()=>{const t=document.createElement("div"),e=document.createElement("div");document.body.appendChild(e),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.appendChild(t),t.style.width="200px",t.style.height="100%",e.style.width="150px",e.style.height="200px",e.style.overflow="hidden";const n=t.offsetHeight;e.style.overflow="scroll";let i=t.offsetHeight;i=n===i?e.clientHeight:i;const s=n-i;return document.body.removeChild(e),{height:s}}))}}const _="prxy",E="conf",N="mask",C="hght";let O;const w={enabled:!0,className:"caroucssel-mask",tagName:"div"};class L{constructor(t={}){i(this,E,Object.assign(Object.assign({},w),t))}get name(){return"buildin:mask"}get el(){var t;return null!==(t=n(this,N))&&void 0!==t?t:null}init(t){i(this,_,t),O=null!=O?O:new y,this._render()}destroy(){this._remove(),r(this)}update(t){switch(t.type){case u.RESIZE:case u.FORCED:s(this,C),this._render();break;default:this._render()}}_render(){const{enabled:t,className:e,tagName:s}=n(this,E);if(!t)return;const r=n(this,_).el;let{height:l}=O.dimensions;r.scrollWidth<=r.clientWidth&&(l=0),n(this,N,(()=>{var t;const n=document.createElement(s);return n.className=e,n.style.overflow="hidden",n.style.height="100%",null===(t=r.parentNode)||void 0===t||t.insertBefore(n,r),n.appendChild(r),n}));l!==n(this,C)&&(i(this,C,l),r.style.height=`calc(100% + ${l}px)`,r.style.marginBottom=-1*l+"px")}_remove(){var t,e;const{el:i}=n(this,_),s=n(this,N);null===(t=null==s?void 0:s.parentNode)||void 0===t||t.insertBefore(i,s),null===(e=null==s?void 0:s.parentNode)||void 0===e||e.removeChild(s),i.removeAttribute("style")}}const k="inst",R="feat";function S(t){return n(t,k)}class j{constructor(t,e){i(this,k,t),i(this,R,e)}get id(){return S(this).id}get el(){return S(this).el}get mask(){return S(this).mask}get index(){return S(this).index}set index(t){S(this).index=t}get items(){return S(this).items}get pages(){return S(this).pages}get pageIndex(){return S(this).pageIndex}update(t){var e;S(this).update(),(e=this,n(e,R)).forEach((e=>{e!==t&&e.update({type:u.FEATURE})}))}}function $(t,e){let n=null;return(...i)=>{null!==n&&clearTimeout(n),n=setTimeout((()=>t(...i)),e)}}const I=/^caroucssel-[0-9]*$/,T="scroll",A="resize",B="element",M="config",P="index",z="items",W="pages",H="page-index",F="mask",U="feautres",D=.25,G=/^(link|meta|noscript|script|style|title)$/i;let Z=0;const q={features:[],filterItem:()=>!0,onScroll:()=>{}};return t.Buttons=class{constructor(t={}){i(this,a,Object.assign(Object.assign({},d),t)),this._onPrev=this._onPrev.bind(this),this._onNext=this._onNext.bind(this)}get name(){return"buildin:buttons"}init(t){i(this,o,t),this._render()}destroy(){this._remove(),r(this)}update(){this._render()}_render(){const t=n(this,o),e=n(this,a),{el:i,mask:s,pages:r,pageIndex:d}=t,[u,p]=n(this,h,(()=>{const t=null!=s?s:i,{template:n,className:r,previousClassName:o,previousLabel:a,previousTitle:h,nextClassName:d,nextLabel:u,nextTitle:p}=e;return[{controls:i.id,label:u,title:p,className:[r,d].join(" "),handler:this._onNext},{controls:i.id,label:a,title:h,className:[r,o].join(" "),handler:this._onPrev}].map((e=>{var i,{handler:s}=e,r=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]])}return n}(e,["handler"]);const o=l(n,r);return o?(o.addEventListener(c,s),null===(i=t.parentNode)||void 0===i||i.insertBefore(o,t.nextSibling),o):null}))}));if(u){const t=void 0===r[d+1];u.disabled=t}if(p){const t=void 0===r[d-1];p.disabled=t}}_remove(){n(this,h).forEach((t=>{var e;null==t||t.removeEventListener(c,this._onPrev),null==t||t.removeEventListener(c,this._onNext),null===(e=null==t?void 0:t.parentNode)||void 0===e||e.removeChild(t)}))}_onPrev(){const t=n(this,o),{pages:e,pageIndex:i}=t,s=e[i-1]||e[0];t.index=s}_onNext(){const t=n(this,o),{pages:e,pageIndex:i}=t,s=e[i+1]||e[e.length-1];t.index=s}},t.Carousel=class{constructor(t,e={}){if(this.behavior=p.AUTO,!(t&&t instanceof Element))throw new Error(`Carousel needs a dom element but "${typeof t}" was passed.`);i(this,B,t),Z++,t.id=t.id||`caroucssel-${Z}`,i(this,"id",t.id);const n=Object.assign(Object.assign({},q),e);i(this,M,n);let s=null,r=[...n.features];const l=n.features.findIndex((t=>t instanceof L));l>-1&&([s]=r.splice(l,1)),null!=s||(s=new L),r=r.filter((t=>!(t instanceof L))),r=[s,...r],i(this,F,s);const o=new j(this,r);switch(i(this,"proxy",o),i(this,U,r),r.forEach((t=>t.init(o))),!0){case Array.isArray(e.index):this.index=e.index;break;case!isNaN(e.index):this.index=[e.index]}this.behavior=p.SMOOTH,this._onScroll=$(this._onScroll.bind(this),25),this._onResize=$(this._onResize.bind(this),25),t.addEventListener(T,this._onScroll),window.addEventListener(A,this._onResize)}static resetInstanceCount(){}get el(){return n(this,B)}get mask(){var t;return null!==(t=n(this,F).el)&&void 0!==t?t:null}get id(){return n(this,"id")}get index(){return n(this,P,(()=>{const{el:t,items:e}=this,{length:n}=e,{clientWidth:i}=t,s=t.getBoundingClientRect().left,r=[];let l=0;for(;l<n;l++){const t=e[l].getBoundingClientRect(),{width:n}=t;let{left:o}=t;o-=s,o+n*D>=0&&o+.75*n<=i&&r.push(l)}return 0===r.length?[0]:r}))}set index(t){const{behavior:e,el:n,items:i}=this,{length:r}=i;if(!Array.isArray(t)||!t.length)return;let l=t[0]||0;l=Math.max(Math.min(l,r-1),0);const{scrollLeft:o}=n,a=o,h={left:i[l].offsetLeft};l===this.pages[0][0]&&(h.left=0),a!==h.left&&(s(this,P),n.scrollTo(Object.assign(Object.assign({},h),{behavior:e})))}get items(){return n(this,z,(()=>{const{filterItem:t}=n(this,M),{el:e}=this;return Array.from(e.children).filter((t=>!G.test(t.tagName)&&!t.hidden)).filter(t)}))}get pages(){return n(this,W,(()=>{const{el:t,items:e}=this,{clientWidth:n}=t;if(0===n)return e.map(((t,e)=>[e]));let i=[[]];return e.map(((t,e)=>{const{offsetLeft:n,clientWidth:i}=t;return{left:n,width:i,item:t,index:e}})).sort(((t,e)=>t.left-e.left)).forEach((t=>{const{left:e,width:s}=t,r=i[i.length-1],l=r[0];let o=(null==l?void 0:l.left)||0;r===i[0]&&(o=0);let a=Math.floor((e-o+.75*s)/n);for(;a>0;)i.push([]),a--;i[i.length-1].push(t)})),i=i.filter((t=>0!==t.length)),i.map((t=>t.map((({index:t})=>t))))}))}get pageIndex(){return n(this,H,(()=>{const{el:t,items:e,index:n,pages:i}=this,s=t.getBoundingClientRect().left,{clientWidth:r}=t;let l=n.reduce(((t,n)=>{if(!e[n])return t;let{left:i,right:l}=e[n].getBoundingClientRect();return i=Math.round(i-s),l=Math.round(l-s),i<0||r<l?t:t.concat([n])}),[]);0===l.length&&(l=[n[0]]);const o=l.sort(((t,n)=>{const i=e[t].getBoundingClientRect().right;return e[n].getBoundingClientRect().right-i}))[0];return i.findIndex((t=>t.includes(o)))}))}destroy(){const{el:t}=this;I.test(t.id)&&t.removeAttribute("id");n(this,U).forEach((t=>t.destroy())),t.removeEventListener(T,this._onScroll),window.removeEventListener(A,this._onResize),r(this)}update(){s(this,P),s(this,z),s(this,W),s(this,H);n(this,U).forEach((t=>t.update({type:u.FORCED})))}_onScroll(t){s(this,P),s(this,H);n(this,U).forEach((t=>t.update({type:u.SCROLL})));const{index:e}=this;n(this,M).onScroll({index:e,type:T,target:this,originalEvent:t})}_onResize(){s(this,W),s(this,P),s(this,H);n(this,U).forEach((t=>t.update({type:u.RESIZE})))}},t.Mask=L,t.Pagination=class{constructor(t={}){i(this,m,Object.assign(Object.assign({},b),t)),this._onClick=this._onClick.bind(this)}get name(){return"buildin:pagination"}init(t){i(this,g,t),this._add()}destroy(){this._remove(),r(this)}update(t){switch(t.type){case u.SCROLL:this._update();break;default:this._remove(),this._add()}}_add(){var t;const e=n(this,g),s=n(this,m),{el:r,mask:o,pages:a}=e,h=null!=o?o:r;if(a.length<2)return;const{template:c,className:d,label:u,title:p}=s,b=l(c,{label:u,title:p,pages:a,className:d,controls:r.id});if(!b)return;const x=Array.from(b.querySelectorAll("button")).map((t=>(t.addEventListener("click",this._onClick,!0),t)));null===(t=h.parentNode)||void 0===t||t.appendChild(b),i(this,f,b),i(this,v,x),this._update()}_update(){const t=n(this,g),e=n(this,v),{pageIndex:i}=t;e.forEach(((t,e)=>t.disabled=e===i))}_remove(){var t;const e=n(this,f),i=n(this,v);null==i||i.forEach((t=>{var e;t.removeEventListener("click",this._onClick),null===(e=t.parentNode)||void 0===e||e.removeChild(t)})),null===(t=null==e?void 0:e.parentNode)||void 0===t||t.removeChild(e),s(this,v),s(this,f)}_onClick(t){const e=n(this,g),i=n(this,v),s=t.currentTarget,r=i.indexOf(s);e.index=e.pages[r]}},t.version="0.12.0-3",Object.defineProperty(t,"__esModule",{value:!0}),t}({});

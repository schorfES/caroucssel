"use strict";"function"==typeof SuppressedError&&SuppressedError;const t=new WeakMap;function e(e,s,n){const i=t.get(e)||new Map;if(i.has(s))return i.get(s);if(!n)return;const o=n();return i.set(s,o),t.set(e,i),o}function s(e,s,n){const i=t.get(e)||new Map;i.set(s,n),t.set(e,i)}function n(e,s){const n=t.get(e);n&&n.has(s)&&n.delete(s)}function i(e){t.delete(e)}function o(t,e){const s=document.createElement("div");s.innerHTML=t(e);const n=s.firstElementChild;return n||null}const r="prxy",l="conf",a="btns",h="click",d={template:({className:t,controls:e,label:s,title:n})=>`\n\t\t<button type="button" class="${t}" aria-label="${s}" title="${n}" aria-controls="${e}">\n\t\t\t<span>${s}</span>\n\t\t</button>\n\t`,className:"button",nextClassName:"is-next",nextLabel:"Next",nextTitle:"Go to next",previousClassName:"is-previous",previousLabel:"Previous",previousTitle:"Go to previous"};const c="prxy",u="conf",p="pgidx",g="posx",v="scrl",m="time",f="grab",x="mousemove",y="mouseup";function b(t){return t instanceof MouseEvent?t.clientX:0}const _={indicator:!1};var E,w;exports.UpdateType=void 0,(E=exports.UpdateType||(exports.UpdateType={})).SCROLL="scroll",E.RESIZE="resize",E.FORCED="forced",E.FEATURE="feature",exports.ScrollBehavior=void 0,(w=exports.ScrollBehavior||(exports.ScrollBehavior={})).AUTO="auto",w.SMOOTH="smooth";const N="prxy",O="conf",C="pags",S="btns",L={template:({className:t,controls:e,pages:s,label:n,title:i})=>`\n\t\t<ul class="${t}">\n\t\t\t${s.map(((t,o)=>{const r={index:o,page:t,pages:s},l=n(r),a=i(r);return`<li>\n\t\t\t\t\t<button type="button" aria-controls="${e}" aria-label="${a}" title="${a}">\n\t\t\t\t\t\t<span>${l}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</li>`})).join("")}\n\t\t</ul>\n\t`,className:"pagination",label:({index:t})=>`${t+1}`,title:({index:t})=>`Go to ${t+1}. page`};const T="dims";class R{constructor(){window.addEventListener("resize",(()=>{n(this,T)}))}get dimensions(){return e(this,T,(()=>{const t=document.createElement("div"),e=document.createElement("div");document.body.appendChild(e),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.appendChild(t),t.style.width="200px",t.style.height="100%",e.style.width="150px",e.style.height="200px",e.style.overflow="hidden";const s=t.offsetHeight;e.style.overflow="scroll";let n=t.offsetHeight;n=s===n?e.clientHeight:n;const i=s-n;return document.body.removeChild(e),{height:i}}))}}const k="prxy",j="conf",I="mask",M="hght";let $;const B={enabled:!0,className:"caroucssel-mask",tagName:"div"};class A{constructor(t={}){s(this,j,Object.assign(Object.assign({},B),t))}get name(){return"buildin:mask"}get el(){var t;return null!==(t=e(this,I))&&void 0!==t?t:null}init(t){s(this,k,t),$=null!=$?$:new R,this._render()}destroy(){this._remove(),i(this)}update(t){switch(t.type){case exports.UpdateType.RESIZE:case exports.UpdateType.FORCED:n(this,M),this._render();break;default:this._render()}}_render(){const{enabled:t,className:n,tagName:i}=e(this,j);if(!t)return;const o=e(this,k).el;let{height:r}=$.dimensions;o.scrollWidth<=o.clientWidth&&(r=0),e(this,I,(()=>{var t;const e=document.createElement(i);return e.className=n,e.style.overflow="hidden",e.style.height="100%",null===(t=o.parentNode)||void 0===t||t.insertBefore(e,o),e.appendChild(o),e}));r!==e(this,M)&&(s(this,M,r),o.style.height=`calc(100% + ${r}px)`,o.style.marginBottom=-1*r+"px")}_remove(){var t,s;const{el:n}=e(this,k),i=e(this,I);null===(t=null==i?void 0:i.parentNode)||void 0===t||t.insertBefore(n,i),null===(s=null==i?void 0:i.parentNode)||void 0===s||s.removeChild(i),n.removeAttribute("style")}}const U="inst",P="feat";function D(t){return e(t,U)}class z{constructor(t,e){s(this,U,t),s(this,P,e)}get id(){return D(this).id}get el(){return D(this).el}get mask(){return D(this).mask}get index(){return D(this).index}set index(t){D(this).index=t}get items(){return D(this).items}get pages(){return D(this).pages}get pageIndex(){return D(this).pageIndex}update(t){var s;D(this).update(),(s=this,e(s,P)).forEach((e=>{e!==t&&e.update({type:exports.UpdateType.FEATURE})}))}}function W(t,e){let s=null;return(...n)=>{null!==s&&clearTimeout(s),s=setTimeout((()=>t(...n)),e)}}const F=/^caroucssel-[0-9]*$/,H="scroll",G="resize",Z="element",q="config",V="index",X="items",J="pages",K="page-index",Q="mask",Y="feautres",tt=.25,et=/^(link|meta|noscript|script|style|title)$/i;let st=0;const nt={features:[],filterItem:()=>!0,onScroll:()=>{}};exports.Buttons=class{constructor(t={}){s(this,l,Object.assign(Object.assign({},d),t)),this._onPrev=this._onPrev.bind(this),this._onNext=this._onNext.bind(this)}get name(){return"buildin:buttons"}init(t){s(this,r,t),this._render()}destroy(){this._remove(),i(this)}update(){this._render()}_render(){const t=e(this,r),s=e(this,l),{el:n,mask:i,pages:d,pageIndex:c}=t,[u,p]=e(this,a,(()=>{const t=null!=i?i:n,{template:e,className:r,previousClassName:l,previousLabel:a,previousTitle:d,nextClassName:c,nextLabel:u,nextTitle:p}=s;return[{controls:n.id,label:u,title:p,className:[r,c].join(" "),handler:this._onNext},{controls:n.id,label:a,title:d,className:[r,l].join(" "),handler:this._onPrev}].map((s=>{var n,{handler:i}=s,r=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]])}return s}(s,["handler"]);const l=o(e,r);return l?(l.addEventListener(h,i),null===(n=t.parentNode)||void 0===n||n.insertBefore(l,t.nextSibling),l):null}))}));if(u){const t=void 0===d[c+1];u.disabled=t}if(p){const t=void 0===d[c-1];p.disabled=t}}_remove(){const t=e(this,a);null==t||t.forEach((t=>{var e;null==t||t.removeEventListener(h,this._onPrev),null==t||t.removeEventListener(h,this._onNext),null===(e=null==t?void 0:t.parentNode)||void 0===e||e.removeChild(t)}))}_onPrev(){const t=e(this,r),{pages:s,pageIndex:n}=t,i=s[n-1]||s[0];t.index=i}_onNext(){const t=e(this,r),{pages:s,pageIndex:n}=t,i=s[n+1]||s[s.length-1];t.index=i}},exports.Carousel=class{static resetInstanceCount(){}constructor(t,e={}){if(this.behavior=exports.ScrollBehavior.AUTO,!(t&&t instanceof Element))throw new Error(`Carousel needs a dom element but "${typeof t}" was passed.`);s(this,Z,t),st++,t.id=t.id||`caroucssel-${st}`,s(this,"id",t.id);const n=Object.assign(Object.assign({},nt),e);s(this,q,n);let i=null,o=[...n.features];const r=n.features.findIndex((t=>t instanceof A));r>-1&&([i]=o.splice(r,1)),null!=i||(i=new A),o=o.filter((t=>!(t instanceof A))),o=[i,...o],s(this,Q,i);const l=new z(this,o);switch(s(this,"proxy",l),s(this,Y,o),o.forEach((t=>t.init(l))),!0){case Array.isArray(e.index):this.index=e.index;break;case!isNaN(e.index):this.index=[e.index]}this.behavior=exports.ScrollBehavior.SMOOTH,this._onScroll=W(this._onScroll.bind(this),45),this._onResize=W(this._onResize.bind(this),25),t.addEventListener(H,this._onScroll),window.addEventListener(G,this._onResize)}get el(){return e(this,Z)}get mask(){var t;return null!==(t=e(this,Q).el)&&void 0!==t?t:null}get id(){return e(this,"id")}get index(){return e(this,V,(()=>{const{el:t,items:e}=this,{length:s}=e,{clientWidth:n}=t,i=t.getBoundingClientRect().left,o=[];let r=0;for(;r<s;r++){const t=e[r].getBoundingClientRect(),{width:s}=t;let{left:l}=t;l-=i,l+s*tt>=0&&l+.75*s<=n&&o.push(r)}return 0===o.length?[0]:o}))}set index(t){const{behavior:e,el:s,items:i}=this,{length:o}=i;if(!Array.isArray(t)||!t.length)return;let r=t[0]||0;r=Math.max(Math.min(r,o-1),0);const{scrollLeft:l}=s,a=l,h={left:i[r].offsetLeft};r===this.pages[0][0]&&(h.left=0),a!==h.left&&(n(this,V),s.scrollTo(Object.assign(Object.assign({},h),{behavior:e})))}get items(){return e(this,X,(()=>{const{filterItem:t}=e(this,q),{el:s}=this;return Array.from(s.children).filter((t=>!et.test(t.tagName)&&!t.hidden)).filter(t)}))}get pages(){return e(this,J,(()=>{const{el:t,items:e}=this,{clientWidth:s}=t;if(0===s)return e.map(((t,e)=>[e]));let n=[[]];return e.map(((t,e)=>{const{offsetLeft:s,clientWidth:n}=t;return{left:s,width:n,item:t,index:e}})).sort(((t,e)=>t.left-e.left)).forEach((t=>{const{left:e,width:i}=t,o=n[n.length-1],r=o[0];let l=(null==r?void 0:r.left)||0;o===n[0]&&(l=0);let a=Math.floor((e-l+.75*i)/s);for(;a>0;)n.push([]),a--;n[n.length-1].push(t)})),n=n.filter((t=>0!==t.length)),n.map((t=>t.map((({index:t})=>t))))}))}get pageIndex(){return e(this,K,(()=>{const{el:t,items:e,index:s,pages:n}=this,i=t.getBoundingClientRect().left,{clientWidth:o}=t;let r=s.reduce(((t,s)=>{if(!e[s])return t;let{left:n,right:r}=e[s].getBoundingClientRect();return n=Math.round(n-i),r=Math.round(r-i),n<0||o<r?t:t.concat([s])}),[]);0===r.length&&(r=[s[0]]);const l=r.sort(((t,s)=>{const n=e[t].getBoundingClientRect().right;return e[s].getBoundingClientRect().right-n}))[0];return n.findIndex((t=>t.includes(l)))}))}destroy(){const{el:t}=this;F.test(t.id)&&t.removeAttribute("id");e(this,Y).forEach((t=>t.destroy())),t.removeEventListener(H,this._onScroll),window.removeEventListener(G,this._onResize),i(this)}update(){n(this,V),n(this,X),n(this,J),n(this,K);e(this,Y).forEach((t=>t.update({type:exports.UpdateType.FORCED})))}_onScroll(t){n(this,V),n(this,K);e(this,Y).forEach((t=>t.update({type:exports.UpdateType.SCROLL})));const{index:s}=this;e(this,q).onScroll({index:s,type:H,target:this,originalEvent:t})}_onResize(){n(this,J),n(this,V),n(this,K);e(this,Y).forEach((t=>t.update({type:exports.UpdateType.RESIZE})))}},exports.Mask=A,exports.Mouse=class{constructor(t={}){s(this,u,Object.assign(Object.assign({},_),t)),this._onStart=this._onStart.bind(this),this._onDrag=this._onDrag.bind(this),this._onEnd=this._onEnd.bind(this)}get name(){return"buildin:mouse"}init(t){s(this,c,t);const n=e(this,u),{el:i}=t;i.style.cursor=n.indicator?f:"",i.addEventListener("mousedown",this._onStart,{passive:!0})}destroy(){i(this)}update(){}_onStart(t){var s;const n=e(this,m);clearTimeout(n);const i=e(this,u),o=e(this,c),r=o.el;e(this,v,(()=>r.scrollLeft)),e(this,g,(()=>b(t))),e(this,p,(()=>o.pageIndex)),r.style.userSelect="none",r.style.scrollBehavior="auto",r.style.scrollSnapType="none",r.style.cursor=i.indicator?"grabbing":"",window.addEventListener(x,this._onDrag,{passive:!0}),window.addEventListener(y,this._onEnd,{passive:!0}),null===(s=i.onStart)||void 0===s||s.call(i,{originalEvent:t})}_onDrag(t){var s,n,i;const o=e(this,u),{el:r}=e(this,c),l=null!==(s=e(this,v))&&void 0!==s?s:0,a=(null!==(n=e(this,g))&&void 0!==n?n:0)-b(t);r.scrollLeft=l+a,null===(i=o.onDrag)||void 0===i||i.call(o,{originalEvent:t})}_onEnd(t){var i,o,r,l;const a=e(this,c),h=e(this,u),d=null!==(i=e(this,v))&&void 0!==i?i:0,b=null!==(o=e(this,p))&&void 0!==o?o:0;n(this,v),n(this,g),n(this,p);const _=a.el,E=Math.min(Math.max(100,.25*_.clientWidth),250),w=_.scrollLeft-d,N=Math.abs(w);_.style.removeProperty("user-select"),_.style.removeProperty("scroll-behavior"),_.style.cursor=h.indicator?f:"";let O=a.index;if(N>E){const t=w/N,e=Math.max(b+t,0);O=null!==(r=a.pages[e])&&void 0!==r?r:O}window.requestAnimationFrame((()=>{a.index=O}));const C=window.setTimeout((()=>{_.style.removeProperty("scroll-snap-type")}),1e3);s(this,m,C),window.removeEventListener(x,this._onDrag),window.removeEventListener(y,this._onEnd),null===(l=h.onEnd)||void 0===l||l.call(h,{originalEvent:t})}},exports.Pagination=class{constructor(t={}){s(this,O,Object.assign(Object.assign({},L),t)),this._onClick=this._onClick.bind(this)}get name(){return"buildin:pagination"}init(t){s(this,N,t),this._add()}destroy(){this._remove(),i(this)}update(t){if(t.type===exports.UpdateType.SCROLL)this._update();else this._remove(),this._add()}_add(){var t;const n=e(this,N),i=e(this,O),{el:r,mask:l,pages:a}=n,h=null!=l?l:r;if(a.length<2)return;const{template:d,className:c,label:u,title:p}=i,g=o(d,{label:u,title:p,pages:a,className:c,controls:r.id});if(!g)return;const v=Array.from(g.querySelectorAll("button")).map((t=>(t.addEventListener("click",this._onClick,!0),t)));null===(t=h.parentNode)||void 0===t||t.appendChild(g),s(this,C,g),s(this,S,v),this._update()}_update(){const t=e(this,N),s=e(this,S),{pageIndex:n}=t;null==s||s.forEach(((t,e)=>t.disabled=e===n))}_remove(){var t;const s=e(this,C),i=e(this,S);null==i||i.forEach((t=>{var e;t.removeEventListener("click",this._onClick),null===(e=t.parentNode)||void 0===e||e.removeChild(t)})),null===(t=null==s?void 0:s.parentNode)||void 0===t||t.removeChild(s),n(this,S),n(this,C)}_onClick(t){const s=e(this,N),n=e(this,S);if(!n)return;const i=t.currentTarget,o=n.indexOf(i);s.index=s.pages[o]}},exports.version="1.1.7";

!function(t,e){if("function"==typeof define&&define.amd)define("caroucssel",["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var n={exports:{}};e(n.exports),t.caroucssel=n.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(t){function e(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){s=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.UpdateType=t.ScrollBehavior=t.Pagination=t.Mouse=t.Mask=t.Carousel=t.Buttons=void 0;var u=new WeakMap;function c(t,e,n){var i=u.get(t)||{};if(e in i)return i[e];if(n){var r=n();return i[e]=r,u.set(t,i),r}}function h(t,e,n){var i=u.get(t)||{};i[e]=n,u.set(t,i)}function f(t,e){var n=u.get(t);n&&(n[e]=void 0,delete n[e])}function d(t){u.delete(t)}function v(t,e){var n=document.createElement("div");n.innerHTML=t(e);var i=n.firstElementChild;return i||null}var p="prxy",y="conf",m="btns",g="click",b={template:function(t){var e=t.className,n=t.controls,i=t.label,r=t.title;return'\n\t\t<button type="button" class="'.concat(e,'" aria-label="').concat(i,'" title="').concat(r,'" aria-controls="').concat(n,'">\n\t\t\t<span>').concat(i,"</span>\n\t\t</button>\n\t")},className:"button",nextClassName:"is-next",nextLabel:"Next",nextTitle:"Go to next",previousClassName:"is-previous",previousLabel:"Previous",previousTitle:"Go to previous"},x=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t),h(this,y,Object.assign(Object.assign({},b),e)),this._onPrev=this._onPrev.bind(this),this._onNext=this._onNext.bind(this)}return l(t,[{key:"name",get:function(){return"buildin:buttons"}},{key:"init",value:function(t){h(this,p,t),this._render()}},{key:"destroy",value:function(){this._remove(),d(this)}},{key:"update",value:function(){this._render()}},{key:"_render",value:function(){var t=this,e=c(this,p),n=c(this,y),r=e.el,o=e.mask,a=e.pages,s=e.pageIndex,l=i(c(this,m,(function(){var e=null!=o?o:r,i=n.template,a=n.className,s=n.previousClassName,l=n.previousLabel,u=n.previousTitle,c=n.nextClassName,h=n.nextLabel,f=n.nextTitle;return[{controls:r.id,label:h,title:f,className:[a,c].join(" "),handler:t._onNext},{controls:r.id,label:l,title:u,className:[a,s].join(" "),handler:t._onPrev}].map((function(t){var n,r=t.handler,o=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["handler"]),a=v(i,o);return a?(a.addEventListener(g,r),null===(n=e.parentNode)||void 0===n||n.insertBefore(a,e.nextSibling),a):null}))})),2),u=l[0],h=l[1];if(u){var f=void 0===a[s+1];u.disabled=f}if(h){var d=void 0===a[s-1];h.disabled=d}}},{key:"_remove",value:function(){var t=this,e=c(this,m);null==e||e.forEach((function(e){var n;null==e||e.removeEventListener(g,t._onPrev),null==e||e.removeEventListener(g,t._onNext),null===(n=null==e?void 0:e.parentNode)||void 0===n||n.removeChild(e)}))}},{key:"_onPrev",value:function(){var t=c(this,p),e=t.pages,n=e[t.pageIndex-1]||e[0];t.index=n}},{key:"_onNext",value:function(){var t=c(this,p),e=t.pages,n=e[t.pageIndex+1]||e[e.length-1];t.index=n}}]),t}();t.Buttons=x;var k="prxy",_="conf",E="pgidx",w="posx",S="scrl",O="time",C="grab",N="mousemove",L="mouseup";function j(t){return t instanceof MouseEvent?t.clientX:0}var T,A,I={indicator:!1},R=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t),h(this,_,Object.assign(Object.assign({},I),e)),this._onStart=this._onStart.bind(this),this._onDrag=this._onDrag.bind(this),this._onEnd=this._onEnd.bind(this)}return l(t,[{key:"name",get:function(){return"buildin:mouse"}},{key:"init",value:function(t){h(this,k,t);var e=c(this,_),n=t.el;n.style.cursor=e.indicator?C:"",n.addEventListener("mousedown",this._onStart,{passive:!0})}},{key:"destroy",value:function(){d(this)}},{key:"update",value:function(){}},{key:"_onStart",value:function(t){var e,n=c(this,O);clearTimeout(n);var i=c(this,_),r=c(this,k),o=r.el;c(this,S,(function(){return o.scrollLeft})),c(this,w,(function(){return j(t)})),c(this,E,(function(){return r.pageIndex})),o.style.userSelect="none",o.style.scrollBehavior="auto",o.style.scrollSnapType="none",o.style.cursor=i.indicator?"grabbing":"",window.addEventListener(N,this._onDrag,{passive:!0}),window.addEventListener(L,this._onEnd,{passive:!0}),null===(e=i.onStart)||void 0===e||e.call(i,{originalEvent:t})}},{key:"_onDrag",value:function(t){var e,n,i,r=c(this,_),o=c(this,k).el,a=null!==(e=c(this,S))&&void 0!==e?e:0,s=(null!==(n=c(this,w))&&void 0!==n?n:0)-j(t);o.scrollLeft=a+s,null===(i=r.onDrag)||void 0===i||i.call(r,{originalEvent:t})}},{key:"_onEnd",value:function(t){var e,n,i,r,o=c(this,k),a=c(this,_),s=null!==(e=c(this,S))&&void 0!==e?e:0,l=null!==(n=c(this,E))&&void 0!==n?n:0;f(this,S),f(this,w),f(this,E);var u=o.el,d=Math.min(Math.max(100,.25*u.clientWidth),250),v=u.scrollLeft-s,p=Math.abs(v);u.style.removeProperty("user-select"),u.style.removeProperty("scroll-behavior"),u.style.cursor=a.indicator?C:"";var y=o.index;if(p>d){var m=v/p,g=Math.max(l+m,0);y=null!==(i=o.pages[g])&&void 0!==i?i:y}window.requestAnimationFrame((function(){o.index=y}));var b=window.setTimeout((function(){u.style.removeProperty("scroll-snap-type")}),1e3);h(this,O,b),window.removeEventListener(N,this._onDrag),window.removeEventListener(L,this._onEnd),null===(r=a.onEnd)||void 0===r||r.call(a,{originalEvent:t})}}]),t}();t.Mouse=R,t.UpdateType=T,function(t){t.SCROLL="scroll",t.RESIZE="resize",t.FORCED="forced",t.FEATURE="feature"}(T||(t.UpdateType=T={})),t.ScrollBehavior=A,function(t){t.AUTO="auto",t.SMOOTH="smooth"}(A||(t.ScrollBehavior=A={}));var M="prxy",P="conf",B="pags",D="btns",z={template:function(t){var e=t.className,n=t.controls,i=t.pages,r=t.label,o=t.title;return'\n\t\t<ul class="'.concat(e,'">\n\t\t\t').concat(i.map((function(t,e){var a={index:e,page:t,pages:i},s=r(a),l=o(a);return'<li>\n\t\t\t\t\t<button type="button" aria-controls="'.concat(n,'" aria-label="').concat(l,'" title="').concat(l,'">\n\t\t\t\t\t\t<span>').concat(s,"</span>\n\t\t\t\t\t</button>\n\t\t\t\t</li>")})).join(""),"\n\t\t</ul>\n\t")},className:"pagination",label:function(t){var e=t.index;return"".concat(e+1)},title:function(t){var e=t.index;return"Go to ".concat(e+1,". page")}},U=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t),h(this,P,Object.assign(Object.assign({},z),e)),this._onClick=this._onClick.bind(this)}return l(t,[{key:"name",get:function(){return"buildin:pagination"}},{key:"init",value:function(t){h(this,M,t),this._add()}},{key:"destroy",value:function(){this._remove(),d(this)}},{key:"update",value:function(t){if(t.type===T.SCROLL)this._update();else this._remove(),this._add()}},{key:"_add",value:function(){var t,e=this,n=c(this,M),i=c(this,P),r=n.el,o=n.mask,a=n.pages,s=null!=o?o:r;if(!(a.length<2)){var l=i.template,u=i.className,f=v(l,{label:i.label,title:i.title,pages:a,className:u,controls:r.id});if(f){var d=Array.from(f.querySelectorAll("button")).map((function(t){return t.addEventListener("click",e._onClick,!0),t}));null===(t=s.parentNode)||void 0===t||t.appendChild(f),h(this,B,f),h(this,D,d),this._update()}}}},{key:"_update",value:function(){var t=c(this,M),e=c(this,D),n=t.pageIndex;null==e||e.forEach((function(t,e){return t.disabled=e===n}))}},{key:"_remove",value:function(){var t,e=this,n=c(this,B),i=c(this,D);null==i||i.forEach((function(t){var n;t.removeEventListener("click",e._onClick),null===(n=t.parentNode)||void 0===n||n.removeChild(t)})),null===(t=null==n?void 0:n.parentNode)||void 0===t||t.removeChild(n),f(this,D),f(this,B)}},{key:"_onClick",value:function(t){var e=c(this,M),n=c(this,D);if(n){var i=t.currentTarget,r=n.indexOf(i);e.index=e.pages[r]}}}]),t}();t.Pagination=U;var W,F="dims",H=function(){function t(){var e=this;a(this,t),window.addEventListener("resize",(function(){f(e,F)}))}return l(t,[{key:"dimensions",get:function(){return c(this,F,(function(){var t=document.createElement("div"),e=document.createElement("div");document.body.appendChild(e),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.appendChild(t),t.style.width="200px",t.style.height="100%",e.style.width="150px",e.style.height="200px",e.style.overflow="hidden";var n=t.offsetHeight;e.style.overflow="scroll";var i=t.offsetHeight,r=n-(i=n===i?e.clientHeight:i);return document.body.removeChild(e),{height:r}}))}}]),t}(),G="prxy",Z="conf",$="mask",q="hght",V={enabled:!0,className:"caroucssel-mask",tagName:"div"},X=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t),h(this,Z,Object.assign(Object.assign({},V),e))}return l(t,[{key:"name",get:function(){return"buildin:mask"}},{key:"el",get:function(){var t;return null!==(t=c(this,$))&&void 0!==t?t:null}},{key:"init",value:function(t){h(this,G,t),W=null!=W?W:new H,this._render()}},{key:"destroy",value:function(){this._remove(),d(this)}},{key:"update",value:function(t){switch(t.type){case T.RESIZE:case T.FORCED:f(this,q),this._render();break;default:this._render()}}},{key:"_render",value:function(){var t=c(this,Z),e=t.enabled,n=t.className,i=t.tagName;if(e){var r=c(this,G).el,o=W.dimensions.height;r.scrollWidth<=r.clientWidth&&(o=0),c(this,$,(function(){var t,e=document.createElement(i);return e.className=n,e.style.overflow="hidden",e.style.height="100%",null===(t=r.parentNode)||void 0===t||t.insertBefore(e,r),e.appendChild(r),e})),o!==c(this,q)&&(h(this,q,o),r.style.height="calc(100% + ".concat(o,"px)"),r.style.marginBottom="".concat(-1*o,"px"))}}},{key:"_remove",value:function(){var t,e,n=c(this,G).el,i=c(this,$);null===(t=null==i?void 0:i.parentNode)||void 0===t||t.insertBefore(n,i),null===(e=null==i?void 0:i.parentNode)||void 0===e||e.removeChild(i),n.removeAttribute("style")}}]),t}();t.Mask=X;var J="inst",K="feat";function Q(t){return c(t,J)}var Y=function(){function t(e,n){a(this,t),h(this,J,e),h(this,K,n)}return l(t,[{key:"id",get:function(){return Q(this).id}},{key:"el",get:function(){return Q(this).el}},{key:"mask",get:function(){return Q(this).mask}},{key:"index",get:function(){return Q(this).index},set:function(t){Q(this).index=t}},{key:"items",get:function(){return Q(this).items}},{key:"pages",get:function(){return Q(this).pages}},{key:"pageIndex",get:function(){return Q(this).pageIndex}},{key:"update",value:function(t){var e;Q(this).update(),(e=this,c(e,K)).forEach((function(e){e!==t&&e.update({type:T.FEATURE})}))}}]),t}();function tt(t,e){var n=null;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];null!==n&&clearTimeout(n),n=setTimeout((function(){return t.apply(void 0,r)}),e)}}var et=function(t){return"caroucssel-".concat(t)},nt=/^caroucssel-[0-9]*$/,it="scroll",rt="resize",ot="element",at="id",st="config",lt="index",ut="items",ct="pages",ht="page-index",ft="mask",dt="proxy",vt="feautres",pt=.25,yt=/^(link|meta|noscript|script|style|title)$/i,mt=0,gt={features:[],filterItem:function(){return!0},onScroll:function(){}},bt=function(){function t(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,t),this.behavior=A.AUTO,!(r&&r instanceof Element))throw new Error('Carousel needs a dom element but "'.concat(n(r),'" was passed.'));h(this,ot,r),mt++,r.id=r.id||et(mt),h(this,at,r.id);var s=Object.assign(Object.assign({},gt),o);h(this,st,s);var l=null,u=e(s.features),c=s.features.findIndex((function(t){return t instanceof X}));if(c>-1){var f=u.splice(c,1),d=i(f,1);l=d[0]}null!=l||(l=new X),u=u.filter((function(t){return!(t instanceof X)})),u=[l].concat(e(u)),h(this,ft,l);var v=new Y(this,u);switch(h(this,dt,v),h(this,vt,u),u.forEach((function(t){return t.init(v)})),!0){case Array.isArray(o.index):this.index=o.index;break;case!isNaN(o.index):this.index=[o.index]}this.behavior=A.SMOOTH,this._onScroll=tt(this._onScroll.bind(this),25),this._onResize=tt(this._onResize.bind(this),25),r.addEventListener(it,this._onScroll),window.addEventListener(rt,this._onResize)}return l(t,[{key:"el",get:function(){return c(this,ot)}},{key:"mask",get:function(){var t;return null!==(t=c(this,ft).el)&&void 0!==t?t:null}},{key:"id",get:function(){return c(this,at)}},{key:"index",get:function(){var t=this;return c(this,lt,(function(){for(var e=t.el,n=t.items,i=n.length,r=e.clientWidth,o=e.getBoundingClientRect().left,a=[],s=0;s<i;s++){var l=n[s].getBoundingClientRect(),u=l.width,c=l.left;(c-=o)+u*pt>=0&&c+.75*u<=r&&a.push(s)}return 0===a.length?[0]:a}))},set:function(t){var e=this.behavior,n=this.el,i=this.items,r=i.length;if(Array.isArray(t)&&t.length){var o=t[0]||0;o=Math.max(Math.min(o,r-1),0);var a=n.scrollLeft,s={left:i[o].offsetLeft};o===this.pages[0][0]&&(s.left=0),a!==s.left&&(f(this,lt),n.scrollTo(Object.assign(Object.assign({},s),{behavior:e})))}}},{key:"items",get:function(){var t=this;return c(this,ut,(function(){var e=c(t,st).filterItem,n=t.el;return Array.from(n.children).filter((function(t){return!yt.test(t.tagName)&&!t.hidden})).filter(e)}))}},{key:"pages",get:function(){var t=this;return c(this,ct,(function(){var e=t.el,n=t.items,i=e.clientWidth;if(0===i)return n.map((function(t,e){return[e]}));var r=[[]];return n.map((function(t,e){return{left:t.offsetLeft,width:t.clientWidth,item:t,index:e}})).sort((function(t,e){return t.left-e.left})).forEach((function(t){var e=t.left,n=t.width,o=r[r.length-1],a=o[0],s=(null==a?void 0:a.left)||0;o===r[0]&&(s=0);for(var l=Math.floor((e-s+.75*n)/i);l>0;)r.push([]),l--;r[r.length-1].push(t)})),(r=r.filter((function(t){return 0!==t.length}))).map((function(t){return t.map((function(t){return t.index}))}))}))}},{key:"pageIndex",get:function(){var t=this;return c(this,ht,(function(){var e=t.el,n=t.items,i=t.index,r=t.pages,o=e.getBoundingClientRect().left,a=e.clientWidth,s=i.reduce((function(t,e){if(!n[e])return t;var i=n[e].getBoundingClientRect(),r=i.left,s=i.right;return r=Math.round(r-o),s=Math.round(s-o),r<0||a<s?t:t.concat([e])}),[]);0===s.length&&(s=[i[0]]);var l=s.sort((function(t,e){var i=n[t].getBoundingClientRect().right;return n[e].getBoundingClientRect().right-i}))[0];return r.findIndex((function(t){return t.includes(l)}))}))}},{key:"destroy",value:function(){var t=this.el;nt.test(t.id)&&t.removeAttribute("id"),c(this,vt).forEach((function(t){return t.destroy()})),t.removeEventListener(it,this._onScroll),window.removeEventListener(rt,this._onResize),d(this)}},{key:"update",value:function(){f(this,lt),f(this,ut),f(this,ct),f(this,ht),c(this,vt).forEach((function(t){return t.update({type:T.FORCED})}))}},{key:"_onScroll",value:function(t){f(this,lt),f(this,ht),c(this,vt).forEach((function(t){return t.update({type:T.SCROLL})}));var e=this.index;c(this,st).onScroll({index:e,type:it,target:this,originalEvent:t})}},{key:"_onResize",value:function(){f(this,ct),f(this,lt),f(this,ht),c(this,vt).forEach((function(t){return t.update({type:T.RESIZE})}))}}],[{key:"resetInstanceCount",value:function(){}}]),t}();t.Carousel=bt;t.version="1.0.4"}));
